var EnvironmentLoader_1=require("./loader/EnvironmentLoader"),JSONFileLoader_1=require("./loader/JSONFileLoader"),YamlFileLoader_1=require("./loader/YamlFileLoader"),IniFileLoader_1=require("./loader/IniFileLoader"),path=require("path"),extend=require("extend"),_=require("lodash"),ConfigRegistry=function(){function e(){this.data=null}return e.prototype.load=function(e,r){return void 0===r&&(r=null),this.config=e,this.env=r,this.configList=this._loadConfig(e,r),this.data=this._mergeConfig(),this},e.prototype.reload=function(){return this.load(this.config,this.env)},e.prototype.getData=function(){return this.data},e.prototype._loadConfig=function(r,n){if(void 0===n&&(n=null),_.isArray(r)){var o=[];return r.forEach(function(r){o.push(e._loadSingleConfig(r,n))}),o}return[e._loadSingleConfig(r,n)]},e._loadSingleConfig=function(e,r){void 0===r&&(r=null);var n,o=path.extname(e)||"";switch(o.toLowerCase()){case".json":case".js":n=new JSONFileLoader_1["default"];break;case".yml":case".yaml":n=new YamlFileLoader_1["default"];break;case".ini":n=new IniFileLoader_1["default"];break;case"":n=new EnvironmentLoader_1["default"];break;default:throw new Error('Config loader for extention "'+o+'" is not implemented.')}return n.load(e,r)},e.prototype._mergeConfig=function(){var e={};return this.configList.forEach(function(r){e=extend(!0,{},e,r.getData())}),e},e}();exports["default"]=ConfigRegistry;