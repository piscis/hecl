var BaseFileLoader_1=require("./BaseFileLoader"),ArrayObjectConverter_1=require("./../utils/ArrayObjectConverter"),Ini=require("ini"),extend=require("extend"),lodash=require("lodash"),traverse=require("traverse"),IniFileLoader=function(){function e(){this.data={},this.doc={}}return e.prototype.load=function(e,t){void 0===t&&(t=null),this.env=t||process.env.NODE_ENV||"development";var r=new BaseFileLoader_1["default"],i=r.load(e).getData();try{this.data=i,this.doc=this.convertIni(Ini.parse(i))}catch(a){this.data={},this.doc={}}return this},e.prototype.reload=function(){return this.load(this.path,this.env)},e.prototype.getData=function(){if(lodash.isObject(this.doc)){var e=this.doc["default"]||{},t=this.doc[this.env]||{};return extend(!0,{},e,t)}return{}},e.prototype.convertIni=function(e){var e=traverse(e).map(function(e){if("string"==typeof e)try{var t=1*e;isNaN(t)||this.update(t)}catch(r){}});return e=ArrayObjectConverter_1["default"].convert(e)},e}();exports["default"]=IniFileLoader;